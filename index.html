
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#0a0a0a">
    <title>Tournament Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&family=Russo+One&display=swap" rel="stylesheet">
    <style id="dynamic-theme">
        :root {
            --neon: #ff4d00;
            --neon-rgb: 255, 77, 0;
        }
    </style>
    <style>
        body { 
            font-family: 'Rubik', sans-serif; 
            background-color: #0a0a0a; 
            color: #fff; 
            -webkit-tap-highlight-color: transparent; 
            user-select: none;
            overflow-x: hidden;
        }
        .font-gaming { font-family: 'Russo One', sans-serif; }
        .text-neon { color: var(--neon); text-shadow: 0 0 10px rgba(var(--neon-rgb), 0.5); }
        .bg-neon { background-color: var(--neon); box-shadow: 0 4px 15px rgba(var(--neon-rgb), 0.4); }
        .border-neon { border-color: var(--neon); }
        ::-webkit-scrollbar { width: 0px; }
        
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.8; transform: scale(0.98); } }
        .pulse { animation: pulse 2s infinite ease-in-out; }
        input:focus, select:focus, textarea:focus { border-color: var(--neon) !important; outline: none; }
        .backdrop-blur-md { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
    </style>
<script type="importmap">
{
  "imports": {
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import htm from 'https://esm.sh/htm@3.1.1';
        import * as Lucide from 'https://esm.sh/lucide-react@0.244.0';

        const html = htm.bind(React.createElement);

        // --- Constants & Storage Keys ---
        const STORAGE_KEY = "ff_hub_user_profile";
        const ADMIN_STORAGE_KEY = "ff_hub_admin_secrets";
        const GITHUB_URL = "https://raw.githubusercontent.com/pawanxumang/pawanxumang.github.io/main/tournaments.json";

        const DEFAULT_CONFIG = {
            appName: "FF TOURNAMENT HUB",
            themeColor: "#ff4d00",
            banners: ["https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=800"],
            rules: [
                "Strictly no hacks or 3rd party tools.",
                "Emulator players are not allowed unless specified.",
                "Must join the room 10 minutes before the start.",
                "Screen recording is recommended for dispute resolution.",
                "Prize will be distributed within 24 hours."
            ],
            upiId: "pawanponnam-1@okicici",
            adminWhatsApp: "919867637326",
            tournaments: [
                { 
                    id: 'demo-1', 
                    name: 'Elite Pro League S1', 
                    matchType: 'Solo', 
                    entryFee: 30, 
                    dateTime: '30 Oct, 08:00 PM', 
                    prizePool: '₹2500', 
                    status: 'Open', 
                    image: 'https://images.unsplash.com/photo-1511512578047-dfb367046420?q=80&w=800', 
                    totalSlots: 48, 
                    joinedSlots: 14,
                    minSlots: 20
                }
            ]
        };

        // --- Helpers ---
        const hexToRgb = (hex) => {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '255, 77, 0';
        };

        // --- Components ---

        const AdminPanel = ({ config, tournaments, onClose }) => {
            const [localConfig, setLocalConfig] = useState(config);
            const [localTournaments, setLocalTournaments] = useState(tournaments);
            const [github, setGithub] = useState(() => {
                const saved = localStorage.getItem(ADMIN_STORAGE_KEY);
                return saved ? JSON.parse(saved) : { token: '', repo: '', path: 'tournaments.json' };
            });
            const [status, setStatus] = useState({ state: 'idle', msg: '' });

            useEffect(() => {
                localStorage.setItem(ADMIN_STORAGE_KEY, JSON.stringify(github));
            }, [github]);

            const pushToGitHub = async () => {
                if (!github.token || !github.repo) return alert("Configure GitHub settings first!");
                setStatus({ state: 'loading', msg: 'Uploading...' });
                try {
                    const url = `https://api.github.com/repos/${github.repo}/contents/${github.path}`;
                    const getRes = await fetch(url, { headers: { 'Authorization': `token ${github.token}` } });
                    if (!getRes.ok) throw new Error("File not found on GitHub");
                    const { sha } = await getRes.json();

                    const payload = { ...localConfig, tournaments: localTournaments };
                    const res = await fetch(url, {
                        method: 'PUT',
                        headers: { 'Authorization': `token ${github.token}`, 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message: `Tournament Arena Sync: ${new Date().toLocaleString()}`,
                            content: btoa(unescape(encodeURIComponent(JSON.stringify(payload, null, 2)))),
                            sha
                        })
                    });
                    if (!res.ok) throw new Error("Sync failed");
                    setStatus({ state: 'success', msg: 'All changes are now LIVE!' });
                    setTimeout(() => setStatus({ state: 'idle', msg: '' }), 3000);
                } catch (e) {
                    setStatus({ state: 'error', msg: e.message });
                }
            };

            const addTournament = () => {
                setLocalTournaments([{
                    id: Date.now().toString(),
                    name: "New Scrims",
                    matchType: "Solo",
                    entryFee: 50,
                    dateTime: "01 Nov, 08:00 PM",
                    prizePool: "₹1000",
                    status: "Open",
                    image: localConfig.banners[0] || "",
                    totalSlots: 48,
                    joinedSlots: 0,
                    minSlots: 10
                }, ...localTournaments]);
            };

            const addRule = () => {
                setLocalConfig({...localConfig, rules: [...localConfig.rules, "New Rule"]});
            };

            const removeRule = (idx) => {
                setLocalConfig({...localConfig, rules: localConfig.rules.filter((_, i) => i !== idx)});
            };

            const updateRule = (idx, val) => {
                const newRules = [...localConfig.rules];
                newRules[idx] = val;
                setLocalConfig({...localConfig, rules: newRules});
            };

            return html`
                <div className="fixed inset-0 z-[200] bg-[#0a0a0a] flex flex-col text-white animate-in slide-in-from-right">
                    <header className="px-6 py-4 bg-[#121212] border-b border-white/5 flex items-center justify-between shadow-xl">
                        <div className="flex items-center gap-2"><${Lucide.Settings} size=${18} className="text-white/40"/><h2 className="font-gaming text-[10px] tracking-[0.2em] uppercase">Control Center</h2></div>
                        <button onClick=${onClose} className="p-2 bg-white/5 rounded-full"><${Lucide.X} size=${18} /></button>
                    </header>
                    <main className="flex-1 overflow-y-auto p-5 space-y-8 pb-32">
                        <section className="space-y-4">
                            <h3 className="text-[10px] font-bold text-white/20 uppercase tracking-[0.2em] ml-1">App Identity</h3>
                            <div className="bg-[#121212] rounded-2xl p-4 border border-white/5 space-y-4">
                                <div className="space-y-1">
                                    <label className="text-[9px] text-white/30 uppercase font-bold ml-1">App Name</label>
                                    <input className="w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-xs" value=${localConfig.appName} onChange=${(e) => setLocalConfig({...localConfig, appName: e.target.value})} />
                                </div>
                                <div className="space-y-1">
                                    <label className="text-[9px] text-white/30 uppercase font-bold ml-1">Theme Color</label>
                                    <div className="flex gap-2">
                                        <input type="color" className="w-12 h-10 bg-black/40 border border-white/5 rounded-xl p-1" value=${localConfig.themeColor} onChange=${(e) => setLocalConfig({...localConfig, themeColor: e.target.value})} />
                                        <input className="flex-1 bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-xs font-mono" value=${localConfig.themeColor} onChange=${(e) => setLocalConfig({...localConfig, themeColor: e.target.value})} />
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section className="space-y-4">
                            <h3 className="text-[10px] font-bold text-white/20 uppercase tracking-[0.2em] ml-1">Arena Rules (Safety Tab)</h3>
                            <div className="bg-[#121212] rounded-2xl p-4 border border-white/5 space-y-4">
                                ${localConfig.rules.map((rule, idx) => html`
                                    <div key=${idx} className="flex gap-2">
                                        <textarea className="flex-1 bg-black/40 border border-white/5 rounded-xl px-4 py-2 text-[10px] min-h-[60px]" value=${rule} onChange=${(e) => updateRule(idx, e.target.value)} />
                                        <button onClick=${() => removeRule(idx)} className="p-2 bg-red-500/10 text-red-500 rounded-xl flex items-center justify-center"><${Lucide.Trash2} size=${14}/></button>
                                    </div>
                                `)}
                                <button onClick=${addRule} className="w-full py-3 bg-neon/10 border border-neon/20 rounded-xl text-[10px] font-bold tracking-widest text-neon uppercase">+ Add New Rule</button>
                            </div>
                        </section>

                        <section className="space-y-4">
                            <h3 className="text-[10px] font-bold text-white/20 uppercase tracking-[0.2em] ml-1">Payments & Contact</h3>
                            <div className="bg-[#121212] rounded-2xl p-4 border border-white/5 space-y-4">
                                <div className="space-y-1">
                                    <label className="text-[9px] text-white/30 uppercase font-bold ml-1">Merchant UPI ID</label>
                                    <input className="w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-xs" value=${localConfig.upiId} onChange=${(e) => setLocalConfig({...localConfig, upiId: e.target.value})} />
                                </div>
                                <div className="space-y-1">
                                    <label className="text-[9px] text-white/30 uppercase font-bold ml-1">WhatsApp Admin (91XXXXXXXXXX)</label>
                                    <input className="w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-xs" value=${localConfig.adminWhatsApp} onChange=${(e) => setLocalConfig({...localConfig, adminWhatsApp: e.target.value})} />
                                </div>
                            </div>
                        </section>

                        <section className="space-y-4">
                            <div className="flex justify-between items-center ml-1">
                                <h3 className="text-[10px] font-bold text-white/20 uppercase tracking-[0.2em]">Live Matches</h3>
                                <button onClick=${addTournament} className="text-[9px] font-bold text-neon uppercase tracking-widest">+ Add New</button>
                            </div>
                            <div className="space-y-6">
                                ${localTournaments.map(t => html`
                                    <div key=${t.id} className="bg-[#121212] rounded-2xl border border-white/5 p-5 space-y-4 shadow-xl">
                                        <div className="flex justify-between">
                                            <input className="bg-transparent border-none outline-none text-white font-gaming text-sm w-full uppercase" value=${t.name} onChange=${(e) => setLocalTournaments(localTournaments.map(x => x.id === t.id ? {...x, name: e.target.value} : x))} />
                                            <button onClick=${() => setLocalTournaments(localTournaments.filter(x => x.id !== t.id))} className="text-red-500/20"><${Lucide.Trash2} size=${18}/></button>
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[8px] text-white/20 uppercase font-bold ml-1">Banner Image URL</label>
                                            <input className="w-full bg-black/40 border border-white/5 rounded-xl px-3 py-2 text-[10px]" value=${t.image} onChange=${(e) => setLocalTournaments(localTournaments.map(x => x.id === t.id ? {...x, image: e.target.value} : x))} />
                                        </div>
                                        <div className="grid grid-cols-2 gap-3">
                                            <div className="space-y-1">
                                                <label className="text-[8px] text-white/20 uppercase font-bold ml-1">Entry Fee (₹)</label>
                                                <input type="number" className="w-full bg-black/40 border border-white/5 rounded-xl px-3 py-2 text-[10px]" value=${t.entryFee} onChange=${(e) => setLocalTournaments(localTournaments.map(x => x.id === t.id ? {...x, entryFee: parseInt(e.target.value)||0} : x))} />
                                            </div>
                                            <div className="space-y-1">
                                                <label className="text-[8px] text-white/20 uppercase font-bold ml-1">Prize Pool</label>
                                                <input className="w-full bg-black/40 border border-white/5 rounded-xl px-3 py-2 text-[10px]" value=${t.prizePool} onChange=${(e) => setLocalTournaments(localTournaments.map(x => x.id === t.id ? {...x, prizePool: e.target.value} : x))} />
                                            </div>
                                            <div className="space-y-1">
                                                <label className="text-[8px] text-white/20 uppercase font-bold ml-1">Current Players</label>
                                                <input type="number" className="w-full bg-black/40 border border-white/5 rounded-xl px-3 py-2 text-[10px]" value=${t.joinedSlots} onChange=${(e) => setLocalTournaments(localTournaments.map(x => x.id === t.id ? {...x, joinedSlots: parseInt(e.target.value)||0} : x))} />
                                            </div>
                                            <div className="space-y-1">
                                                <label className="text-[8px] text-white/20 uppercase font-bold ml-1">Total Slots</label>
                                                <input type="number" className="w-full bg-black/40 border border-white/5 rounded-xl px-3 py-2 text-[10px]" value=${t.totalSlots} onChange=${(e) => setLocalTournaments(localTournaments.map(x => x.id === t.id ? {...x, totalSlots: parseInt(e.target.value)||48} : x))} />
                                            </div>
                                        </div>
                                    </div>
                                `)}
                            </div>
                        </section>

                        <section className="space-y-4 pb-20">
                            <h3 className="text-[10px] font-bold text-white/20 uppercase tracking-[0.2em] ml-1">GitHub Config</h3>
                            <div className="bg-[#121212] rounded-2xl p-4 border border-white/5 space-y-4">
                                <input placeholder="Personal Access Token" type="password" className="w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-xs" value=${github.token} onChange=${(e) => setGithub({...github, token: e.target.value})} />
                                <input placeholder="Owner/Repo (e.g. user/myrepo)" className="w-full bg-black/40 border border-white/5 rounded-xl px-4 py-3 text-xs" value=${github.repo} onChange=${(e) => setGithub({...github, repo: e.target.value})} />
                            </div>
                        </section>
                    </main>
                    <footer className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-[#121212] border-t border-white/5 p-5 flex flex-col gap-3 shadow-[0_-10px_40px_rgba(0,0,0,0.8)]">
                        ${status.msg && html`<div className=${`text-[10px] font-bold uppercase text-center py-2.5 rounded-xl ${status.state === 'error' ? 'text-red-500 bg-red-500/10' : 'text-green-500 bg-green-500/10'}`}>${status.msg}</div>`}
                        <button onClick=${pushToGitHub} disabled=${status.state === 'loading'} className="w-full bg-neon py-4 rounded-2xl font-gaming text-sm tracking-widest text-white shadow-xl flex items-center justify-center gap-2 active:scale-95 transition-all">
                            ${status.state === 'loading' ? html`<div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>` : html`<${Lucide.Globe} size=${18}/>`}
                            ${status.state === 'loading' ? 'SAVING...' : 'SYNC ALL CHANGES'}
                        </button>
                    </footer>
                </div>
            `;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [tournaments, setTournaments] = useState(DEFAULT_CONFIG.tournaments);
            const [config, setConfig] = useState(DEFAULT_CONFIG);
            const [activeTab, setActiveTab] = useState('home');
            const [selectedT, setSelectedT] = useState(null);
            const [showPayment, setShowPayment] = useState(false);
            const [isAdminOpen, setIsAdminOpen] = useState(false);
            const [isAdminLoginOpen, setIsAdminLoginOpen] = useState(false);
            const [passInput, setPassInput] = useState('');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const savedUser = localStorage.getItem(STORAGE_KEY);
                if (savedUser) {
                    try { setUser(JSON.parse(savedUser)); } catch (e) { localStorage.removeItem(STORAGE_KEY); }
                }

                const fetchData = async () => {
                    setLoading(true);
                    try {
                        const res = await fetch(GITHUB_URL + '?t=' + Date.now());
                        if (res.ok) {
                            const data = await res.json();
                            setConfig({
                                appName: data.appName || DEFAULT_CONFIG.appName,
                                themeColor: data.themeColor || DEFAULT_CONFIG.themeColor,
                                banners: data.banners || DEFAULT_CONFIG.banners,
                                rules: data.rules || DEFAULT_CONFIG.rules,
                                upiId: data.upiId || DEFAULT_CONFIG.upiId,
                                adminWhatsApp: data.adminWhatsApp || DEFAULT_CONFIG.adminWhatsApp
                            });
                            setTournaments(data.tournaments || []);
                        }
                    } catch (e) { console.error("Fetch Error:", e); }
                    setLoading(false);
                };
                fetchData();
            }, []);

            useEffect(() => {
                const themeTag = document.getElementById('dynamic-theme');
                if (themeTag) {
                    themeTag.innerHTML = `:root { --neon: ${config.themeColor}; --neon-rgb: ${hexToRgb(config.themeColor)}; }`;
                }
            }, [config.themeColor]);

            const handleJoinConfirmation = (t) => {
                const msg = encodeURIComponent(`Hi Admin!\n\nI want to confirm my registration for:\n*${t.name}*\n\n*PLAYER DETAILS:*\nIGN: ${user?.ign}\nUID: ${user?.uid}\nFee Paid: ₹${t.entryFee}\n\nI have attached the screenshot below.`);
                window.open(`https://wa.me/${config.adminWhatsApp}?text=${msg}`, '_blank');
            };

            const [onboard, setOnboard] = useState({ fullName: '', ign: '', uid: '', level: '', upiId: '' });

            if (!user) return html`
                <div className="min-h-screen bg-[#0a0a0a] flex flex-col items-center px-8 py-12 text-white">
                    <div className="w-20 h-20 bg-neon rounded-[2.5rem] flex items-center justify-center mb-8 pulse shadow-2xl"><span className="font-gaming text-4xl italic">FF</span></div>
                    <h2 className="font-gaming text-2xl tracking-widest uppercase">Register</h2>
                    <p className="text-white/30 text-[9px] mt-2 mb-10 tracking-[0.3em] uppercase font-bold text-center">Create your pro identity</p>
                    <div className="w-full max-w-xs space-y-4">
                        <input placeholder="Full Name" className="w-full bg-[#121212] border border-white/5 rounded-2xl px-5 py-4 text-sm" value=${onboard.fullName} onChange=${(e) => setOnboard({ ...onboard, fullName: e.target.value })} />
                        <input placeholder="In-Game Name (IGN)" className="w-full bg-[#121212] border border-white/5 rounded-2xl px-5 py-4 text-sm" value=${onboard.ign} onChange=${(e) => setOnboard({ ...onboard, ign: e.target.value })} />
                        <input placeholder="Free Fire UID" className="w-full bg-[#121212] border border-white/5 rounded-2xl px-5 py-4 text-sm" value=${onboard.uid} onChange=${(e) => setOnboard({ ...onboard, uid: e.target.value })} />
                        <input placeholder="Level" className="w-full bg-[#121212] border border-white/5 rounded-2xl px-5 py-4 text-sm" value=${onboard.level} onChange=${(e) => setOnboard({ ...onboard, level: e.target.value })} />
                        <input placeholder="UPI ID" className="w-full bg-[#121212] border border-white/5 rounded-2xl px-5 py-4 text-sm" value=${onboard.upiId} onChange=${(e) => setOnboard({ ...onboard, upiId: e.target.value })} />
                        <button onClick=${() => { if(onboard.ign && onboard.uid) { setUser(onboard); localStorage.setItem(STORAGE_KEY, JSON.stringify(onboard)); } else alert("Required: IGN and UID"); }} className="w-full bg-neon py-4 rounded-2xl font-gaming text-sm tracking-widest shadow-xl mt-6 active:scale-95 transition-all">ENTER ARENA</button>
                    </div>
                </div>
            `;

            const initialChar = (user?.ign || 'U').charAt(0).toUpperCase();

            return html`
                <div className="flex flex-col h-screen max-w-md mx-auto bg-[#0a0a0a] overflow-hidden relative">
                    <header className="px-5 py-4 bg-[#121212] border-b border-white/5 flex items-center justify-between z-40 shadow-xl">
                        <div className="flex items-center gap-2"><div className="w-8 h-8 bg-neon rounded-xl flex items-center justify-center shadow-lg"><span className="text-white font-gaming text-xs italic">FF</span></div><h1 className="font-gaming text-sm tracking-wider text-neon">${config.appName}</h1></div>
                        <div className="flex items-center gap-1">
                            <a href="https://youtube.com/@shinzofreefire" className="p-2 text-white/20 hover:text-white"><${Lucide.Youtube} size=${18}/></a>
                            <a href="https://instagram.com/shinzo_ff" className="p-2 text-white/20 hover:text-white"><${Lucide.Instagram} size=${18}/></a>
                            <button onClick=${() => setIsAdminLoginOpen(true)} className="p-2 text-white/10 hover:text-neon"><${Lucide.Lock} size=${14}/></button>
                        </div>
                    </header>

                    <main className="flex-1 overflow-y-auto pb-24">
                        ${loading ? html`<div className="flex flex-col items-center justify-center h-full gap-4"><div className="w-10 h-10 border-2 border-neon border-t-transparent rounded-full animate-spin"></div><p className="font-gaming text-[9px] tracking-[0.4em] text-white/10">SYNCING LOBBY...</p></div>` : 
                        html`
                            ${activeTab === 'home' && html`
                                <div className="p-4 space-y-6">
                                    <div className="relative w-full h-48 rounded-[2.5rem] overflow-hidden border border-white/5 bg-[#121212] shadow-2xl group">
                                        <img src=${config.banners[0] || ""} className="w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-[2s]" />
                                        <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
                                        <div className="absolute bottom-6 left-6">
                                            <p className="font-gaming text-[9px] text-neon tracking-[0.4em] uppercase mb-1 drop-shadow-lg">LIVE SCRIMS</p>
                                            <h3 className="font-gaming text-2xl text-white uppercase tracking-wider drop-shadow-2xl italic">PRO ARENA</h3>
                                        </div>
                                    </div>
                                    <div className="flex items-center justify-between px-2"><h2 className="font-gaming text-[11px] tracking-widest text-white/20 uppercase">Available Scrims</h2></div>
                                    <div className="grid gap-5">
                                        ${tournaments.length === 0 ? html`<div className="text-center py-20 text-white/10 font-gaming text-sm">NO MATCHES LIVE</div>` : tournaments.map(t => html`
                                            <div key=${t.id} onClick=${() => { setSelectedT(t); setShowPayment(false); }} className="bg-[#121212] rounded-[3rem] overflow-hidden border border-white/5 p-5 flex flex-col gap-5 active:scale-[0.98] transition-all cursor-pointer shadow-xl">
                                                <div className="relative h-36 rounded-[2rem] overflow-hidden">
                                                    <img src=${t.image || ""} className="w-full h-full object-cover opacity-50" />
                                                    <div className="absolute top-4 left-4 flex gap-2">
                                                        <span className="text-[10px] font-bold px-3 py-1 rounded-full bg-green-500/10 text-green-500 border border-green-500/20 uppercase tracking-widest">Live</span>
                                                        <span className="text-[10px] font-bold px-3 py-1 rounded-full bg-neon/20 text-white border border-neon/30 tracking-widest">₹${t.entryFee}</span>
                                                    </div>
                                                    <div className="absolute bottom-5 left-5"><h3 className="font-gaming text-xl text-white uppercase drop-shadow-xl tracking-wide">${t.name}</h3></div>
                                                </div>
                                                <div className="flex justify-between items-center px-2">
                                                    <div className="flex flex-col gap-1"><span className="text-[9px] text-white/20 uppercase font-bold tracking-widest">Winning Pool</span><div className="flex items-center gap-2 text-yellow-500"><${Lucide.Trophy} size=${14}/><span className="text-sm font-gaming tracking-wide">${t.prizePool}</span></div></div>
                                                    <div className="flex flex-col gap-1 text-right"><span className="text-[9px] text-white/20 uppercase font-bold tracking-widest">Schedule</span><div className="flex items-center gap-2 text-white/60"><${Lucide.Clock} size=${14}/><span className="text-[10px] font-bold tracking-widest">${t.dateTime.split(',')[1]}</span></div></div>
                                                </div>
                                                <div className="px-2 space-y-2">
                                                    <div className="flex justify-between text-[9px] font-bold uppercase text-white/30 tracking-widest"><span>Capacity</span><span>${t.joinedSlots} / ${t.totalSlots}</span></div>
                                                    <div className="h-1.5 w-full bg-white/5 rounded-full overflow-hidden shadow-inner"><div className="h-full bg-neon rounded-full transition-all duration-1000" style=${{width: `${(t.joinedSlots/t.totalSlots)*100}%`}}></div></div>
                                                </div>
                                            </div>
                                        `)}
                                    </div>
                                </div>
                            `}
                            ${activeTab === 'rules' && html`
                                <div className="p-6 space-y-6 animate-in slide-in-from-bottom">
                                    <div className="flex items-center gap-4"><div className="w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center text-neon shadow-xl"><${Lucide.FileText} size=${24} /></div><h2 className="font-gaming text-lg tracking-widest uppercase">Arena Rules</h2></div>
                                    <div className="bg-[#121212] rounded-[3rem] p-10 border border-white/5 space-y-8 shadow-2xl">
                                        ${config.rules.map((r, i) => html`<div key=${i} className="flex gap-5"><span className="font-gaming text-xs text-neon/20 pt-1">${i+1}</span><p className="text-xs text-white/40 leading-loose tracking-wide">${r}</p></div>`)}
                                    </div>
                                </div>
                            `}
                            ${activeTab === 'profile' && html`
                                <div className="p-6 animate-in fade-in flex flex-col gap-10">
                                    <h2 className="font-gaming text-sm tracking-[0.3em] text-white/20 uppercase text-center">My Identity</h2>
                                    <div className="flex flex-col items-center gap-6">
                                        <div className="w-28 h-28 rounded-[2.5rem] bg-gradient-to-tr from-[#121212] to-[#1a1a1a] border border-white/5 flex items-center justify-center shadow-2xl relative">
                                            <span className="font-gaming text-5xl text-neon drop-shadow-2xl">${initialChar}</span>
                                            <button onClick=${() => alert("Edit profile in next update")} className="absolute -bottom-1 -right-1 p-3 bg-neon rounded-2xl text-white shadow-xl border-4 border-[#0a0a0a]"><${Lucide.Settings2} size=${14}/></button>
                                        </div>
                                        <div className="text-center">
                                            <h2 className="font-gaming text-2xl tracking-[0.1em] text-white uppercase">${user.ign}</h2>
                                            <p className="text-[10px] text-white/20 uppercase tracking-[0.4em] font-bold mt-2 italic">Elite Tier Level ${user.level}</p>
                                        </div>
                                    </div>
                                    <div className="bg-[#121212] rounded-[3rem] p-10 border border-white/5 space-y-8 shadow-2xl">
                                        <div className="space-y-1"><label className="text-[9px] font-bold text-white/10 uppercase tracking-widest ml-1">Real Name</label><div className="text-sm text-white/60 font-medium px-1">${user.fullName}</div></div>
                                        <div className="space-y-1"><label className="text-[9px] font-bold text-white/10 uppercase tracking-widest ml-1">Free Fire UID</label><div className="text-sm text-white/60 font-medium px-1">${user.uid}</div></div>
                                        <div className="space-y-1"><label className="text-[9px] font-bold text-white/10 uppercase tracking-widest ml-1">Verified UPI ID</label><div className="text-sm text-white/60 font-medium px-1">${user.upiId}</div></div>
                                    </div>
                                    <button onClick=${() => { if(confirm("Reset profile?")) { localStorage.clear(); window.location.reload(); } }} className="text-[9px] text-white/10 uppercase font-bold tracking-[0.4em] hover:text-red-500 transition-colors">Destroy Session Data</button>
                                </div>
                            `}
                        `}
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-[#121212] border-t border-white/5 flex justify-around items-center h-20 z-40 shadow-[0_-15px_50px_rgba(0,0,0,0.8)] px-8">
                        <button onClick=${() => setActiveTab('home')} className=${`flex flex-col items-center gap-1.5 transition-all ${activeTab === 'home' ? 'text-neon scale-110' : 'text-white/10'}`}><${Lucide.Gamepad2} size=${22}/><span className="text-[8px] font-bold uppercase tracking-widest">Arena</span></button>
                        <button onClick=${() => setActiveTab('rules')} className=${`flex flex-col items-center gap-1.5 transition-all ${activeTab === 'rules' ? 'text-neon scale-110' : 'text-white/10'}`}><${Lucide.Shield} size=${22}/><span className="text-[8px] font-bold uppercase tracking-widest">Safety</span></button>
                        <button onClick=${() => setActiveTab('profile')} className=${`flex flex-col items-center gap-1.5 transition-all ${activeTab === 'profile' ? 'text-neon scale-110' : 'text-white/10'}`}><${Lucide.User} size=${22}/><span className="text-[8px] font-bold uppercase tracking-widest">Me</span></button>
                    </nav>

                    ${selectedT && html`
                        <div className="fixed inset-0 z-[100] flex items-end justify-center animate-in fade-in">
                            <div className="absolute inset-0 bg-black/95 backdrop-blur-md" onClick=${() => { setSelectedT(null); setShowPayment(false); }}></div>
                            <div className="relative w-full max-w-md bg-[#0a0a0a] rounded-t-[3.5rem] border-t border-white/10 p-10 space-y-8 animate-in slide-in-from-bottom shadow-2xl">
                                ${!showPayment ? html`
                                    <div className="text-center space-y-3">
                                        <h2 className="font-gaming text-2xl text-white uppercase tracking-widest">${selectedT.name}</h2>
                                        <p className="text-neon text-[10px] font-bold uppercase tracking-[0.5em] italic">REGISTRATION ACTIVE</p>
                                    </div>
                                    <div className="grid grid-cols-3 gap-3">
                                        <div className="bg-[#121212] p-5 rounded-[2rem] border border-white/5 flex flex-col items-center gap-2"><${Lucide.User} size=${18} className="text-neon"/><span className="text-[9px] font-gaming uppercase tracking-widest">${selectedT.matchType}</span></div>
                                        <div className="bg-[#121212] p-5 rounded-[2rem] border border-white/5 flex flex-col items-center gap-2"><${Lucide.Zap} size=${18} className="text-neon"/><span className="text-[9px] font-gaming uppercase tracking-widest text-yellow-500">${selectedT.prizePool}</span></div>
                                        <div className="bg-[#121212] p-5 rounded-[2rem] border border-white/5 flex flex-col items-center gap-2"><${Lucide.Clock} size=${18} className="text-neon"/><span className="text-[9px] font-bold uppercase tracking-widest">${selectedT.dateTime.split(',')[0]}</span></div>
                                    </div>
                                    <div className="bg-[#121212] p-8 rounded-[2.5rem] border border-white/5 space-y-5 shadow-inner">
                                        <div className="flex justify-between items-center"><span className="text-[10px] text-white/20 uppercase font-bold tracking-widest">Arena Entry</span><span className="text-2xl font-gaming text-neon">₹${selectedT.entryFee}</span></div>
                                        <div className="h-1.5 w-full bg-black rounded-full overflow-hidden"><div className="h-full bg-neon rounded-full" style=${{width: `${(selectedT.joinedSlots/selectedT.totalSlots)*100}%`}}></div></div>
                                        <p className="text-[9px] text-center text-white/30 uppercase tracking-[0.2em] font-bold italic">Join ${selectedT.joinedSlots} others in this battle</p>
                                    </div>
                                    <button onClick=${() => setShowPayment(true)} className="w-full bg-neon py-5 rounded-[2rem] font-gaming text-sm tracking-[0.3em] text-white shadow-2xl shadow-neon/40 flex items-center justify-center gap-4 active:scale-95 transition-all"><${Lucide.CreditCard} size=${22}/> JOIN MATCH & PAY</button>
                                ` : html`
                                    <div className="text-center space-y-6 animate-in slide-in-from-right">
                                        <div className="text-center space-y-2">
                                            <h2 className="font-gaming text-xl text-white uppercase tracking-widest">Checkout</h2>
                                            <p className="text-neon text-[10px] font-bold uppercase tracking-[0.4em]">Payment for ${selectedT.name}</p>
                                        </div>
                                        <div className="bg-[#121212] p-6 rounded-[2.5rem] border border-white/5 space-y-4">
                                            <p className="text-[10px] font-bold text-red-500 uppercase tracking-widest italic leading-relaxed">
                                                NOTE: Send payment screenshot to admin on WhatsApp after payment. Otherwise you cannot join.
                                            </p>
                                        </div>
                                        <div className="bg-white p-6 rounded-[2.5rem] shadow-2xl mx-auto inline-block border-8 border-white">
                                            <img src=${`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`upi://pay?pa=${config.upiId}&pn=${config.appName}&am=${selectedT.entryFee}&cu=INR&tn=${encodeURIComponent(selectedT.name)}`)}`} className="w-48 h-48" />
                                        </div>
                                        <div className="space-y-4">
                                            <p className="text-[11px] font-gaming text-white uppercase tracking-widest">Total: ₹${selectedT.entryFee}</p>
                                            <p className="text-white/20 text-[9px] uppercase tracking-widest">Scan the QR code to proceed</p>
                                        </div>
                                        <button onClick=${() => handleJoinConfirmation(selectedT)} className="w-full bg-[#25D366] py-5 rounded-[2rem] font-gaming text-xs tracking-[0.2em] text-white shadow-xl flex items-center justify-center gap-3 active:scale-95 transition-all"><${Lucide.MessageSquare} size=${22}/> CONFIRM ON WHATSAPP</button>
                                        <button onClick=${() => setShowPayment(false)} className="text-[10px] font-bold text-white/20 uppercase tracking-widest block mx-auto">Go Back</button>
                                    </div>
                                `}
                            </div>
                        </div>
                    `}

                    ${isAdminLoginOpen && html`
                        <div className="fixed inset-0 z-[150] bg-black/98 flex items-center justify-center p-10 animate-in fade-in">
                            <div className="bg-[#121212] w-full max-w-xs rounded-[3rem] border border-white/5 p-12 flex flex-col items-center gap-10 shadow-2xl relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-1 bg-neon opacity-20"></div>
                                <button onClick=${() => setIsAdminLoginOpen(false)} className="absolute top-8 right-8 p-2 text-white/20"><${Lucide.X} size=${20}/></button>
                                <div className="w-20 h-20 bg-neon/10 rounded-full flex items-center justify-center text-neon shadow-[0_0_30px_rgba(var(--neon-rgb),0.2)]"><${Lucide.ShieldAlert} size=${40} /></div>
                                <div className="text-center space-y-2"><h3 className="font-gaming text-lg text-white uppercase tracking-widest">Terminal Login</h3><p className="text-[10px] text-white/20 uppercase tracking-[0.4em] font-bold">Authorized Access Only</p></div>
                                <input type="password" placeholder="Passcode" className="w-full bg-black/40 border border-white/10 rounded-2xl px-5 py-5 text-center tracking-[0.6em] text-white focus:border-neon outline-none text-xl" value=${passInput} onChange=${(e) => setPassInput(e.target.value)} />
                                <button onClick=${() => { if(passInput === "Pawan1645@") { setIsAdminOpen(true); setIsAdminLoginOpen(false); setPassInput(''); } else alert("Access Terminated"); }} className="w-full bg-neon py-5 rounded-2xl font-gaming text-xs tracking-widest text-white shadow-2xl active:scale-95 transition-all">DECRYPT CONSOLE</button>
                            </div>
                        </div>
                    `}

                    ${isAdminOpen && html`<${AdminPanel} config=${config} tournaments=${tournaments} onClose=${() => setIsAdminOpen(false)} />`}
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
